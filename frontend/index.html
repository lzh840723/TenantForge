<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TenantForge Console</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="config.js"></script>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">TenantForge Console</div>
      <div class="muted note">Backend Base: <code id="baseNow"></code></div>
      <div class="row" style="margin-top:10px">
        <input id="base" placeholder="https://xxx.up.railway.app" />
        <button class="secondary" id="btnSaveBase">Save</button>
      </div>
      <nav class="nav" id="nav">
        <a href="#auth" data-target="auth" class="active">Auth</a>
        <a href="#projects" data-target="projects">Projects</a>
        <a href="#tasks" data-target="tasks">Tasks</a>
        <a href="#time" data-target="time">Time</a>
        <a href="#reports" data-target="reports">Reports</a>
        <a href="#health" data-target="health">Health</a>
      </nav>
      <div class="footer">JWT: <code id="tokenInfo"></code></div>
    </aside>
    <main class="content">
      <section id="auth" class="card">
        <h1>Auth</h1>
        <div class="zone actions">
          <button id="registerBtn">Register + Sign In</button>
          <button id="loginBtn" class="secondary">Sign In</button>
          <button id="btnRefresh">Refresh Token</button>
          <button class="secondary" id="btnLogout">Sign Out</button>
          <button class="ghost" id="btnCopyAccess">Copy Access</button>
        </div>
        <div class="zone inputs grid two">
          <div class="field"><label>Tenant Name</label><input id="tenantName" value="demo-tenant" placeholder="demo-tenant" /></div>
          <div class="field"><label>Display Name</label><input id="displayName" value="Demo Owner" placeholder="Demo Owner" /></div>
          <div class="field"><label>Email</label><input id="email" value="demo@tenantforge.dev" placeholder="email@example.com" /></div>
          <div class="field"><label>Password</label><input id="password" type="password" value="Password123!" placeholder="Password" /></div>
        </div>
        <div class="zone results">
          <pre id="registerOut" class="note"></pre>
          <pre id="loginOut" class="note"></pre>
          <pre id="authOut" class="note"></pre>
        </div>
      </section>

      <section id="projects" class="card" hidden>
        <h1>Projects</h1>
        <div class="zone actions">
          <button id="projList">List</button>
          <button id="projGet" class="secondary">Query</button>
          <button id="projCreate">Create</button>
          <button id="projUpdate" class="secondary">Update</button>
          <button id="projDelete" class="secondary">Delete</button>
        </div>
        <div class="zone inputs grid three">
          <div class="field"><label>Name contains (q)</label><input id="projQ" placeholder="e.g. demo" /></div>
          <div class="field"><label>Project ID (read-only, select from table)</label><input id="projId" placeholder="Select a row to autofill" readonly /></div>
          <div class="row">
            <button id="projCopyId" class="ghost">Copy ID</button>
          </div>
          <div class="field"><label>Name (for create/update)</label><input id="projName" placeholder="Name" /></div>
          <div class="field"><label>Description (for create/update)</label><input id="projDesc" placeholder="Description" /></div>
        </div>
        <div class="zone results">
          <div class="note muted">Tip: click any row to autofill Project ID and fields for update/delete.</div>
          <div id="projTableWrap" class="row"></div>
          <pre id="projectsOut" class="note"></pre>
        </div>
      </section>

      <section id="tasks" class="card" hidden>
        <h1>Tasks</h1>
        <div class="zone actions">
          <button id="taskList">List</button>
          <button id="taskGet" class="secondary">Query</button>
          <button id="taskCreate">Create</button>
          <button id="taskUpdate" class="secondary">Update</button>
          <button id="taskDelete" class="secondary">Delete</button>
        </div>
        <div class="zone inputs grid three">
          <div class="field"><label>Name contains (q)</label><input id="taskQ" placeholder="e.g. demo" /></div>
          <div class="field"><label>Project ID</label><input id="taskProjectId" placeholder="Filter/Create" /></div>
          <div class="field"><label>Status</label><input id="taskStatus" placeholder="OPEN/CLOSED" /></div>
          <div class="field"><label>Task Name</label><input id="taskName" placeholder="for create/update" /></div>
          <div class="field"><label>Task ID (read-only, select from table)</label><input id="taskId" placeholder="Select a row to autofill" readonly /></div>
          <div class="row"><button id="taskCopyId" class="ghost">Copy ID</button></div>
        </div>
        <div class="zone results">
          <div id="taskTableWrap" class="row"></div>
          <pre id="tasksOut" class="note"></pre>
        </div>
      </section>

      <section id="time" class="card" hidden>
        <h1>Time Entries</h1>
        <p class="note muted">Default userId uses JWT sub: <code id="userIdDefault"></code></p>
        <div class="zone actions">
          <button id="teList">List</button>
          <button id="teSeed" class="secondary">Seed sample</button>
          <button id="teGet" class="secondary">Query</button>
          <button id="teCreate">Create</button>
          <button id="teUpdate" class="secondary">Update</button>
          <button id="teDelete" class="secondary">Delete</button>
        </div>
        <div class="zone inputs grid three">
          <div class="field"><label>Task ID</label><input id="teTaskId" placeholder="Task ID" /></div>
          <div class="field"><label>User ID</label><input id="teUserId" placeholder="optional, defaults to JWT.sub" /></div>
          <div class="field"><label>Notes</label><input id="teNotes" placeholder="optional" /></div>
          <div class="field"><label>Started At</label><input id="teStart" placeholder="ISO, default now-1h" /></div>
          <div class="field"><label>Ended At</label><input id="teEnd" placeholder="ISO, default now" /></div>
          <div class="field"><label>Time Entry ID (read-only, select from table)</label><input id="teId" placeholder="Select a row to autofill" readonly /></div>
          <div class="row"><button id="teCopyId" class="ghost">Copy ID</button></div>
          <div class="field"><label>Filter Start</label><input id="teFilterStart" placeholder="ISO" /></div>
          <div class="field"><label>Filter End</label><input id="teFilterEnd" placeholder="ISO" /></div>
        </div>
        <div class="zone results">
          <div id="teTableWrap" class="row"></div>
          <pre id="teOut" class="note"></pre>
        </div>
      </section>

      <section id="reports" class="card" hidden>
        <h1>Reports</h1>
        <div class="zone actions">
          <button id="rJson">JSON</button>
          <button id="rCsv" class="secondary">CSV</button>
        </div>
        <div class="zone inputs grid three">
          <div class="field"><label>Period</label><input id="rPeriod" placeholder="week|month (default week)" /></div>
          <div class="field"><label>Project ID (optional)</label><input id="rProjectId" placeholder="UUID" /></div>
          <div class="field"><label>User ID (optional)</label><input id="rUserId" placeholder="UUID" /></div>
        </div>
        <div class="zone results">
          <pre id="reportOut" class="note"></pre>
        </div>
      </section>

      <section id="health" class="card" hidden>
        <h1>Health Check</h1>
        <div class="zone actions">
          <button id="btnHealth">Check /api/health</button>
          <a class="secondary" id="linkOpenApi" target="_blank" rel="noreferrer">Open OpenAPI JSON</a>
        </div>
        <div class="zone inputs">
          <div class="note muted">No input required.</div>
        </div>
        <div class="zone results">
          <pre id="healthOut" class="note"></pre>
        </div>
      </section>

      <div id="toast" class="toast"></div>
    </main>
  </div>
  <script src="app.js"></script>
</body>
</html>
